name: test build status change
on:
  push:
    branches:
      - experimental/run_status

permissions:
  actions: read

jobs:
  fail_success:
    runs-on: ubuntu-latest
    steps:
      - name: fail
        run: exit 1
  second_job:
    needs:
      - fail_success
    runs-on: ubuntu-latest
    steps:
      - name: success
        run: echo "success"
  status:
    needs:
      - second_job
    if: ${{ !cancelled() }}
    uses: ./.github/workflows/reusable-status.yaml
    secrets: inherit
